<%- include('partials/battle_head'); -%>

<h1 class="title"><%= title %></h1>

<div class="row">
    <div class="col-6 m-auto">
        <form enctype="multipart/form-data" action="battle/upload" method="post">
            <div class="mb-3">
                <input type="file" class="form-control form-control-lg" id="battle_file" name="battle_file" accept=".battle" />
            </div>
            <div class="mb-3">
                <!--  <button onclick="uploadFile()">Read</button> -->
                <button class="btn btn-primary">Submit</button>   
            </div>
        </form>
    </div>
</div>

<!-- File Upload Logic JavaScript -->
<script>

    async function uploadFile() {
        let formData = new FormData();
        formData.append("battle_file", fileupload.files[0]);
        await fetch("/battle/upload", {
            method: "POST",
            body: formData
        });
    }

    async function readFile() {
        const reader = new FileReader();
        reader.addEventListener("load", () => {
            const file_data = JSON.parse(reader.result);
            console.log(file_data);
        });
        reader.readAsText(fileupload.files[0]);
    }

</script>

<%- include('partials/battle_foot'); -%>